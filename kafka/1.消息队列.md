# 消息队列

## 通信模式

#### 同步模式

![image-20200910225902339](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200910225902339.png)

#### 异步模式

1. 缓解服务端压力(削峰)
2. 独立的处理服务端和客户端(解耦)



## 消息队列模式

#### 点对点模式

![image-20200910230422872](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200910230422872.png)

* 消费者主动拉取消息，消费后就清除

* 如果在发给其他人需要在创建一个队列

#### 发布/订阅模式

![image-20200910230640632](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200910230640632.png)

* 消费者消费后不会清除
* 一个消息可以发送多个人
* 如果消息主动推给消费者
  * 如果推的速度由队列服务决定，如果consumer的性能不一样回导致资源浪费或者信息丢失
* 如果消费者主动接收信息（kafka选择的方式）
  *  消费者需要维护一个长轮询查看是否有新的消息（在没有消息时候浪费资源）